var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(t,l,a)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a;import{c as o,t as c,o as i,R as m,D as p,T as u,I as d,A as x,a as E,E as h,b as f,d as b,e as g,B as v,f as y,g as C,S as k,h as S,C as N,i as w,j as O,k as D,l as P,m as T,L as j,n as A,p as I,q as z,r as R,s as M,u as W,v as B,w as q,x as F}from"./vendor.4d941c36.js";const L=o({palette:{primary:c,secondary:i,type:"dark"},props:{MuiTextField:{fullWidth:!0,variant:"outlined",size:"small"}}}),$=m.createContext({emit:()=>{},listen:()=>{},unlisten:()=>{}}),J=({children:e})=>{const[t]=m.useState((()=>{const e={};return{emit:(t,l)=>{if(e[t])for(const a of e[t])setTimeout(a,0,t,l)},listen:(t,l)=>{null!=e[t]||(e[t]=[]),e[t].push(l)},unlisten:(t,l)=>{null!=e[t]||(e[t]=[]),e[t]=e[t].filter((e=>e!==l))}}}));return m.createElement($.Provider,{value:t,children:e})},G=()=>m.useContext($);function H(e){const t=p.exports.useRef();t.current=e;const[l]=p.exports.useState((()=>(...e)=>t.current(...e)));return l}const K=({onAddItem:e=(e=>!1)})=>{const[t,l]=p.exports.useState(""),[a,r]=p.exports.useState(""),s=H((a=>{a.stopPropagation(),a.preventDefault(),t?e(t)?l(""):r("Input is already in the list"):r("Please input the item you want to add")})),n=p.exports.useCallback((e=>{l(e.target.value),r("")}),[r,l]);return p.exports.createElement("form",{className:"flex-grow",onSubmit:s},p.exports.createElement(u,{fullWidth:!1,className:"w-1/2",value:t,onChange:n,error:!!a,helperText:a,InputProps:Q}))},Q={className:"pr-1",endAdornment:p.exports.createElement(d,{size:"small",type:"submit"},p.exports.createElement(x,null))},U=({children:e,onChange:t=(()=>{})})=>{const[l,a]=p.exports.useState(),[r,s]=p.exports.useState(""),n=H((e=>{e.stopPropagation(),e.preventDefault(),l?(t(l),a(void 0)):s("This field is required")})),o=p.exports.useCallback((e=>{s(""),a(e.target.value)}),[s,a]);return p.exports.createElement(p.exports.Fragment,null,p.exports.createElement(E,{variant:"h6",className:"flex-grow",gutterBottom:!1,children:e}),p.exports.createElement(d,{size:"small",onClick:()=>a(e)},p.exports.createElement(h,null)),void 0!==l&&p.exports.createElement(f,{open:!0,onClose:()=>a(void 0)},p.exports.createElement("form",{onSubmit:n},p.exports.createElement(b,null,p.exports.createElement(u,{required:!0,value:l,onChange:o,error:!!r,helperText:r})),p.exports.createElement(g,null,p.exports.createElement(v,{children:"Cancel",onClick:()=>a(void 0)}),p.exports.createElement(v,{type:"submit",children:"Save"})))))},V=({expanded:e=!1,poolData:t,onToggle:l=(()=>{}),onDelete:a=(()=>{})})=>{const[,r]=p.exports.useState(),s=p.exports.useCallback((e=>-1===t.items.indexOf(e)&&(t.items.push(e),r({}),!0)),[t.items,r]),n=p.exports.useCallback((e=>{const l=t.items.indexOf(e);t.items.splice(l,1),r({})}),[t.items,r]),o=p.exports.useCallback((e=>{t.label=e,r({})}),[r]),c=G(),i=p.exports.useCallback((()=>{localStorage[`list-${t.label}`]&&!confirm(`${t.label} is already existed. Are you sure you want to override it?`)||(localStorage[`list-${t.label}`]=JSON.stringify(t.items),c.emit("saved-list-changed"))}),[t,c]);return p.exports.createElement(y,{expanded:e,onChange:l},p.exports.createElement(C,null,p.exports.createElement(U,{children:t.label,onChange:o}),p.exports.createElement(d,{size:"small",className:"ml-1",onClick:i},p.exports.createElement(k,null))),p.exports.createElement(S,{className:"flex-wrap"},t.items.map((e=>p.exports.createElement(N,{key:e,className:"m-1",label:e,"data-item":e,onDelete:()=>n(e)})))),p.exports.createElement(w,{className:"w-full flex items-center"},p.exports.createElement(K,{onAddItem:s}),p.exports.createElement(d,{size:"small",onClick:a},p.exports.createElement(O,null))))},X=({lists:e,onClose:t=(()=>{})})=>{const[l,a]=p.exports.useState([]),r=p.exports.useCallback((()=>{a(e.map((e=>e.items[Math.floor(e.items.length*Math.random())])))}),[e]);return p.exports.useEffect(r,[]),p.exports.createElement(f,{open:!0,fullWidth:!0,maxWidth:"md"},p.exports.createElement(D,{className:"relative"},p.exports.createElement("div",{className:"absolute right-0 top-0"},p.exports.createElement(d,{onClick:t},p.exports.createElement(P,null)))),p.exports.createElement(b,{className:"overflow-hidden"},l.map((e=>p.exports.createElement(E,{key:+new Date,className:"text-center block animate-slideFromRight",variant:"h6",component:"span",children:e})))),p.exports.createElement(g,null,p.exports.createElement("div",{className:"w-full text-center"},p.exports.createElement(v,{children:"Pick Random",variant:"outlined",onClick:r}))))},Y=({onApplyList:e=(()=>{})})=>{const[t,l]=p.exports.useState({}),a=p.exports.useMemo((()=>{const e=[];for(const t in localStorage)t.startsWith("list-")&&e.push({id:0,label:t.substring("list-".length),items:JSON.parse(localStorage[t])});return e}),[t]),r=G();p.exports.useEffect((()=>{const e=()=>l({});return r.listen("saved-list-changed",e),()=>{r.unlisten("saved-list-changed",e)}}),[r]);return p.exports.createElement("div",null,p.exports.createElement(T,{className:"my-2"}),p.exports.createElement(E,{variant:"h6",component:"span",children:"Saved"}),p.exports.createElement(j,null,a.map((t=>p.exports.createElement(A,{key:t.label,button:!0,onClick:()=>e(t)},p.exports.createElement(I,{primary:t.label}),p.exports.createElement(z,null,p.exports.createElement(d,{onClick:()=>(e=>{delete localStorage["list-"+e.label],l({})})(t)},p.exports.createElement(O,null))))))))};function Z(){return{id:+new Date,label:"Random Items",items:[]}}function _(){const[e,o]=m.useState([Z()]),[c,i]=m.useState(e[0]),p=m.useCallback((()=>{o((e=>{const t=Z();return i(t),[...e,t]}))}),[o,i]),u=m.useCallback((e=>{const c=(m=((e,t)=>{for(var l in t||(t={}))r.call(t,l)&&n(e,l,t[l]);if(a)for(var l of a(t))s.call(t,l)&&n(e,l,t[l]);return e})({},e),p={id:+new Date},t(m,l(p)));var m,p;o((e=>[...e,c])),i(c)}),[]),[h,f]=m.useState(!1),b=H((()=>{for(const t of e)if(0===t.items.length)return alert("There are empty lists. Please remove them to start");f(!0)}));return m.createElement(R,{theme:L},m.createElement(J,null,m.createElement(M,null),m.createElement("div",{className:"App"},m.createElement(W,{position:"sticky"},m.createElement(B,null,m.createElement(E,{variant:"h6",component:"h1",className:"flex-grow",children:"Randomizer"}),m.createElement(d,{onClick:p},m.createElement(x,null)))),m.createElement(q,{maxWidth:"lg",className:"p-3"},e.map((e=>m.createElement(V,{key:e.id,expanded:c===e,poolData:e,onToggle:()=>i(e),onDelete:()=>o((t=>{const l=t.indexOf(e),a=t.filter((t=>t!==e));return i(a[Math.min(a.length-1,l)]),a}))}))),m.createElement("div",{className:"text-center my-2"},m.createElement(v,{disabled:0===e.length,variant:"contained",color:"primary",children:"Build Randomizer",onClick:b})),m.createElement(Y,{onApplyList:u}))),h&&m.createElement(X,{lists:e,onClose:()=>f(!1)})))}F.render(m.createElement(m.StrictMode,null,m.createElement(_,null)),document.getElementById("root"));
